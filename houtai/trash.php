<?php
//Copyright (c) 2016 iFeiwu.com
 class Trash extends Item { function __construct() { $this->table = "\164\x72\141\163\150"; parent::__construct(); } protected function postDelete($request_data) { goto MfG3v; QgCnh: ONGva: goto yApRH; ZgZTk: $this->_log("\x64\x65\x6c\x65\164\145", array("\164\x69\164\x6c\145" => count($ids))); goto eucbm; VcY_0: return $this->error(); goto JVp_K; MfG3v: $error = array(); goto ai2tH; phpeh: lbmjq: goto FOP1u; iJT_0: $this->db->beginTransaction(); goto RKTPo; eucbm: return $this->success(); goto QgCnh; FOP1u: if (count($error) === 0) { goto rrIy6; } goto SI8KZ; RKTPo: foreach ($ids as $id) { goto LtWHS; nmSkZ: R2TfS: goto A6OFs; qpcfs: YhjTO: goto nmSkZ; A6OFs: NkhqO: goto WUzRO; LtWHS: $trash = $this->db->select($this->table)->where(array("\151\144", "\x3d", $id))->get(); goto UrR_d; sQPKE: $this->_rmdir("\56\x2e\x2f" . $path); goto qpcfs; UrR_d: $path = $trash["\160\141\x74\x68"]; goto p8Ktj; nXebg: $error[] = $trash["\164\151\x74\x6c\145"]; goto f3QkQ; rvMtR: Qk99T: goto iiHRC; p8Ktj: if ($this->db->delete($this->table, array("\151\x64", "\x3d", $id))->is()) { goto Qk99T; } goto nXebg; iiHRC: if (!($path && count(explode("\57", $path)) >= 2)) { goto YhjTO; } goto sQPKE; f3QkQ: goto R2TfS; goto rvMtR; WUzRO: } goto phpeh; FHxXJ: rrIy6: goto hwrtu; hwrtu: $this->db->commit(); goto ZgZTk; JVp_K: goto ONGva; goto FHxXJ; SI8KZ: $this->db->rollBack(); goto VcY_0; ai2tH: $ids = $request_data["\151\144"]; goto iJT_0; yApRH: } protected function postReplay($request_data) { goto nBaju; OOsrK: T5pFt: goto dEko9; dEko9: $this->db->commit(); goto p3xP7; BPNVH: goto iC4RN; goto OOsrK; ETKci: if (count($error) === 0) { goto T5pFt; } goto pt_Up; mYI5L: return $this->error(); goto BPNVH; nBaju: $error = array(); goto UA1Yq; ZJJ00: foreach ($ids as $id) { goto lEeVR; lEeVR: $trash = $this->db->select($this->table)->where(array("\151\144", "\x3d", $id))->get(); goto HOkIA; CDAL2: $error[] = $trash["\164\151\164\154\145"]; goto fzy29; HOkIA: $table = $trash["\164\x61\x62\x6c\145"]; goto N2Kun; q_e5h: rD1dP: goto CDAL2; QL9k3: if ($isadd === false) { goto rD1dP; } goto klEOt; qfVgK: kooCo: goto lRUpu; fzy29: WIYNt: goto qfVgK; N2Kun: $isadd = $this->db->insert($table, json_decode($trash["\x64\141\x74\x61"], true)); goto QL9k3; uFME8: goto WIYNt; goto q_e5h; klEOt: $this->db->delete($this->table, array("\x69\x64", "\75", $id)); goto uFME8; lRUpu: } goto L7_3J; pt_Up: $this->db->rollBack(); goto mYI5L; foOz1: return $this->success(); goto Oro9X; p3xP7: $this->_log("\162\x65\160\x6c\x79", array("\x74\x69\x74\x6c\145" => count($ids))); goto foOz1; Oro9X: iC4RN: goto ij9oh; UA1Yq: $ids = $request_data["\x69\144"]; goto f9MMg; f9MMg: $this->db->beginTransaction(); goto ZJJ00; L7_3J: gSqaA: goto ETKci; ij9oh: } }
