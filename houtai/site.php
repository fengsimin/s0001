<?php
//Copyright (c) 2016 iFeiwu.com
 class Site extends Item { function __construct() { $this->table = "\163\x69\x74\x65"; parent::__construct(); } protected function getData() { goto jPiDg; jPiDg: $data = $this->db->select($this->table)->all(); goto Th0xZ; gtBou: foreach ($data as $d) { goto gnFGW; gnFGW: $value = $d["\x76\x61\154\x75\145"]; goto TiT4P; TiT4P: if (!($value != '')) { goto URNrF; } goto PvsiN; PvsiN: $site[$d["\156\x61\155\x65"]] = $value; goto QEw2i; CkaSa: t0bKI: goto uTlb4; QEw2i: URNrF: goto CkaSa; uTlb4: } goto aSP3s; MyfVc: return $this->success($site); goto q_OVN; aSP3s: MimZU: goto MyfVc; Th0xZ: $site = array(); goto gtBou; q_OVN: } protected function postSave($request_data) { goto GDkAS; WFVnP: $this->db->commit(); goto JVrNF; a1bLB: unset($request_data["\164\157\153\145\156"], $request_data["\x61\x64\x6d\151\x6e"], $request_data["\137\162\145\155\157\x76\145\x66\151\x6c\x65\163"]); goto ko9qj; PgU4B: goto Qe2NT; goto fh4BP; jCXfn: $this->db->rollBack(); goto f5pdI; GDkAS: $this->_removeFiles2($request_data["\x5f\x72\x65\155\157\x76\145\146\151\154\x65\163"]); goto a1bLB; NHsqI: $this->db->beginTransaction(); goto KyhQ2; KyhQ2: foreach ($request_data as $name => $value) { goto gfvnW; zE732: wmxqZ: goto H2XxS; w292Y: goto gH2O6; goto Ub28L; ePMyt: if (!($this->db->update($this->table, array("\x76\x61\154\165\x65" => $value), array("\156\x61\155\145", "\x3d", $name))->is() === false)) { goto JA4pa; } goto boK3p; gbEg7: $value = $this->_encode($value); goto nc7Sb; nc7Sb: if ($count <= 0) { goto rgv2M; } goto ePMyt; vDUUZ: $error[] = $name; goto fOAIp; boK3p: $error[] = $name; goto s4xlT; s4xlT: JA4pa: goto w292Y; fOAIp: qFGgz: goto b2Bjf; gfvnW: $count = $this->db->select($this->table)->where(array("\x6e\x61\x6d\x65", "\75", $name))->count(); goto gbEg7; b2Bjf: gH2O6: goto zE732; wcMSE: if (!($this->db->insert($this->table, array("\156\x61\x6d\x65" => $name, "\166\x61\x6c\x75\145" => $value))->is() === false)) { goto qFGgz; } goto vDUUZ; Ub28L: rgv2M: goto wcMSE; H2XxS: } goto ztfRz; ko9qj: $error = array(); goto NHsqI; HofYm: Qe2NT: goto yG4jL; ztfRz: xIGrI: goto bHKEr; JVrNF: $this->_log("\165\160\x64\141\164\x65", array("\164\x69\164\154\x65" => "\xe7\xbd\x91\347\xab\231\350\256\276\xe7\xbd\xae")); goto V4E3B; fh4BP: FXUsm: goto WFVnP; f5pdI: return $this->error("\xe5\267\262\344\277\235\345\xad\230\345\244\261\xe8\xb4\xa5\xef\274\201"); goto PgU4B; V4E3B: return $this->success("\345\267\xb2\xe4\277\x9d\345\255\x98\xe6\233\xb4\xe6\224\xb9\357\xbc\x81"); goto HofYm; bHKEr: if (count($error) === 0) { goto FXUsm; } goto jCXfn; yG4jL: } protected function postSkin($request_data) { goto z96qo; DBZSA: Lrlby: goto GPDsE; Vxemb: $filename = "\x2e\x2e\57\141\x73\163\145\x74\x2f\143\x73\163\57\x73\x74\x79\x6c\145\56\143\163\x73"; goto abtQT; gYHe_: $request_data["\x73\x6b\151\x6e"] = $skins[1]; goto DBZSA; lUT4e: vnf3m: goto blsHr; blsHr: unset($request_data["\164\x6f\153\x65\x6e"], $request_data["\x61\144\x6d\151\x6e"], $request_data["\x73\164\x79\154\x65\55\143\157\x64\145"]); goto poUAb; jhJxW: $skins = explode("\55", $request_data["\164\150\145\155\145\55\163\153\x69\x6e"]); goto LNO6R; z96qo: if (!isset($request_data["\x73\164\x79\154\145\x2d\x63\x6f\x64\145"])) { goto vnf3m; } goto Vxemb; zhTbH: return $this->success("\345\267\262\xe4\277\x9d\345\255\x98\xe6\x9b\xb4\xe6\224\271\357\274\x81"); goto BWNTh; abtQT: file_put_contents($filename, $request_data["\x73\164\171\154\145\x2d\x63\157\x64\x65"]); goto uftnI; V95nT: bT_oz: goto zhTbH; GPDsE: foreach ($request_data as $name => $value) { $this->_saveData($this->table, array("\156\141\155\145" => $name, "\166\x61\154\x75\145" => $value), array("\156\x61\x6d\145", "\x3d", $name)); vmZJj: } goto V95nT; LNO6R: $request_data["\164\150\145\x6d\x65"] = $skins[0]; goto gYHe_; uftnI: chmod($filename, 420); goto lUT4e; poUAb: if (!isset($request_data["\164\x68\145\x6d\x65\55\163\x6b\151\156"])) { goto Lrlby; } goto jhJxW; BWNTh: } protected function getStyleCode() { $code = file_get_contents("\x2e\56\x2f\141\x73\x73\145\x74\57\x63\x73\x73\x2f\x73\x74\171\x6c\145\x2e\x63\163\x73"); return $this->success(array($code)); } }
