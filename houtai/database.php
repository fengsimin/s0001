<?php
//Copyright (c) 2016 iFeiwu.com
 class Database extends Ifeiwu { function __construct() { $this->table = ''; parent::__construct(); } protected function postBackup() { goto wRgfY; U5Vad: return $this->error(); goto x0gag; xWAB4: if ($name !== false) { goto bVmrp; } goto U5Vad; YCf1L: $mb = new MysqlBackup(); goto Ki_UI; Ki_UI: $name = $mb->export(); goto xWAB4; HptEk: bVmrp: goto Y4TQS; x0gag: goto jWRNX; goto HptEk; Y4TQS: return $this->success('', $name); goto SetUO; wRgfY: ifeiwu\Loader::import("\x65\x78\x74\x65\x6e\144\57\x4d\171\x73\x71\x6c\x42\141\143\x6b\x75\160"); goto YCf1L; SetUO: jWRNX: goto kS7cK; kS7cK: } protected function postReply($filename) { goto ky2EJ; Tzdms: oMQqf: goto rVrkA; KnKQs: v0adn: goto T7iSp; rVrkA: return $this->success(); goto KnKQs; zqkVJ: $errors = $mb->import($filename); goto gslA0; gslA0: if (!$errors) { goto oMQqf; } goto OoWPV; LZKje: $mb = new MysqlBackup(); goto zqkVJ; OoWPV: return $this->error(json_encode($errors)); goto iCTZS; iCTZS: goto v0adn; goto Tzdms; ky2EJ: ifeiwu\Loader::import("\x65\170\x74\x65\x6e\x64\57\115\171\163\x71\154\102\141\x63\153\x75\160"); goto LZKje; T7iSp: } protected function getSqls() { goto QtY8o; X_5Py: return array_reverse($files); goto Q9cSp; UTal7: T9QsA: goto fFHr3; nTXwr: $files[] = array("\x6e\141\x6d\x65" => $file, "\x73\151\x7a\x65" => $stat["\163\x69\172\145"], "\x63\x74\151\x6d\145" => $stat["\x63\x74\151\155\145"]); goto YzPOJ; jUMAJ: $stat = stat($dir . $file); goto nTXwr; fFHr3: closedir($handle); goto weW_2; QtY8o: $dir = "\x73\x71\154\57"; goto GcEu9; weW_2: uhGFU: goto X_5Py; ku4BH: if (!(false !== ($file = readdir($handle)))) { goto T9QsA; } goto jygn0; GcEu9: if (!(false != ($handle = opendir($dir)))) { goto uhGFU; } goto Ox0dy; Ox0dy: XnW6N: goto ku4BH; W9gOu: goto XnW6N; goto UTal7; YzPOJ: yl03m: goto W9gOu; jygn0: if (!($file != "\x2e" && $file != "\x2e\56" && strpos($file, "\56"))) { goto yl03m; } goto jUMAJ; Q9cSp: } protected function postDelete($filename) { goto spqp6; lnNHO: tUWxg: goto rmUNX; hjiYI: goto h8oqv; goto lnNHO; nmX4V: h8oqv: goto IpEUf; rmUNX: return $this->success(); goto nmX4V; Tjijv: return $this->error(); goto hjiYI; spqp6: if (unlink("\x73\161\154\x2f{$filename}") !== false) { goto tUWxg; } goto Tjijv; IpEUf: } }
